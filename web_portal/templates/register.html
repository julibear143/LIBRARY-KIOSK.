<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Registration Page for UC Web Portal" />
    <link rel="apple-touch-icon" href="{{ url_for('static', filename='logo192.png') }}" />
    <title>Library Web Portal Registration</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet" />
    <style>
    body {
        font-family: "Roboto", sans-serif;
        background-color: #f4f4f4;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh; /* Ensures body takes up full screen height but grows with content */
        margin: 0;
        padding: 20px; /* Added padding to avoid content touching the edges */
    }

    .register-container {
        background-color: #fff;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        width: 100%;
        max-width: 400px; /* Adjust the max-width to suit various screen sizes */
        text-align: center;
        box-sizing: border-box; /* Ensures padding is included in the width calculation */
        margin-top: 20px; /* Adds space above the form */
    }

    h2 {
        margin-bottom: 20px;
        font-size: 24px;
        color: #333;
        margin-top: 0; /* Remove margin top if not needed */
    }

    input[type="text"], input[type="password"], input[type="email"], select {
        width: 100%;
        padding: 10px;
        margin: 10px 0;
        border: 1px solid #ccc;
        border-radius: 4px;
        box-sizing: border-box;
    }

    button {
        width: 100%;
        padding: 10px;
        background-color: #4CAF50;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
    }

    button:hover {
        background-color: #45a049;
    }

    /* Password strength meter */
    #password-strength-container {
        width: 100%;
        height: 5px;
        background-color: #e0e0e0;
        margin: 10px 0;
    }

    #password-strength-meter {
        height: 100%;
        width: 0;
        background-color: red;
    }

    /* Adding margin to separate checkbox and submit button */
    #showPassword {
        margin-bottom: 15px; /* Adds space between the checkbox and the register button */
    }

    /* Mobile and zoom responsive layout */
    @media (max-width: 600px) {
        .register-container {
            max-width: 90%; /* Makes sure it doesnâ€™t stretch too wide on smaller screens */
            padding: 15px;
        }

        h2 {
            font-size: 20px; /* Adjust title size on smaller screens */
        }

        input[type="text"], input[type="password"], input[type="email"], select {
            font-size: 14px; /* Adjust input size for smaller screens */
        }

        button {
            font-size: 14px; /* Adjust button size for smaller screens */
        }
    }
</style>

</head>
<body>
    <div class="register-container">
        <h2>Register</h2>
        <form id="registerForm" method="POST" action="http://127.0.0.1:5000/register">

            <!-- Role Selection First -->
            <select id="role" name="role" required>
                <option value="" disabled selected>Select Role</option>
                <option value="Student">Student</option>
                <option value="Teacher">Teacher</option>
            </select><br>

            <!-- Common Fields -->
            <input type="text" id="username" name="username" placeholder="User Name" required /><br>
            <input type="text" id="contact_number" name="contact_number" placeholder="Contact Number" required /><br>
            <input type="email" id="email" name="email" placeholder="Email Address" required /><br>
            <select id="gender" name="gender" required>
                <option value="" disabled selected>Select Gender</option>
                <option value="Male">Male</option>
                <option value="Female">Female</option>
                <option value="Other">Other</option>
            </select><br>

            <!-- Fields for Students -->
            <div id="studentFields" style="display: none;">
                <select id="year_level" name="year_level">
                    <option value="" disabled selected>Select Year Level</option>
                    <option value="1">1st Year</option>
                    <option value="2">2nd Year</option>
                    <option value="3">3rd Year</option>
                    <option value="4">4th Year</option>
                    <option value="5">5th Year</option>
                </select><br>
                <select id="course" name="course">
                    <option value="" disabled selected>Select Course</option>
                    <option value="BSMT">BSMT - Bachelor of Science in Marine Transportation</option>
                    <option value="BSMarE">BSMarE - Bachelor of Science in Marine Engineering</option>
                    <option value="BSHM">BSHM - Bachelor of Science in Hospitality Management</option>
                    <option value="BSA">BSA - Bachelor of Science in Accountancy</option>
                    <option value="BSBA">BSBA - Bachelor of Science in Business Administration</option>
                    <option value="BSCA">BSCA - Bachelor of Science in Customs Administration</option>
                    <option value="BSCoE">BSCoE - Bachelor of Science in Computer Engineering</option>
                    <option value="BSEE">BSEE - Bachelor of Science in Electrical Engineering</option>
                    <option value="BSECE">BSECE - Bachelor of Science in Electronics and Communications Engineering</option>
                    <option value="BSIE">BSIE - Bachelor of Science in Industrial Engineering</option>
                    <option value="BSME">BSME - Bachelor of Science in Mechanical Engineering</option>
                    <option value="BSCS">BSCS - Bachelor of Science in Computer Science</option>
                    <option value="BSIT">BSIT - Bachelor of Science in Information Technology</option>
                    <option value="BEEd">BEEd - Bachelor of Elementary Education</option>
                    <option value="BSEd">BSEd - Bachelor of Secondary Education</option>
                    <option value="BSCrim">BSCrim - Bachelor of Science in Criminology</option>
                    <option value="BSN">BSN - Bachelor of Science in Nursing</option>
                </select><br>
            </div>

            <!-- Fields for Teachers -->
            <div id="teacherFields" style="display: none;">
                <select id="department" name="department">
                    <option value="" disabled selected>Select Department</option>
                    <option value="Engineering">Engineering</option>
                    <option value="Information Technology">Information Technology</option>
                    <option value="Hospitality Management">Hospitality Management</option>
                    <option value="Business and Accountancy">Business and Accountancy</option>
                    <option value="Nursing">Nursing</option>
                    <option value="Maritime Education">Maritime Education</option>
                    <option value="Education">Education</option>
                    <option value="Criminology">Criminology</option>
                </select><br>
            </div>

            <!-- School ID -->
            <input type="text" id="school_id" name="school_id" placeholder="School ID Number" required /><br>

            <!-- Password Field -->
            <input type="password" id="password" name="password" placeholder="Password" required oninput="checkPasswordStrength()" /><br>

            <!-- Password Confirmation Field -->
            <input type="password" id="password_confirm" name="password_confirm" placeholder="Confirm Password" required oninput="checkPasswordMatch()" /><br>

            <!-- Password Strength Meter -->
            <div id="password-strength-container">
                <div id="password-strength-meter"></div>
            </div><br>

            <!-- Password Match Feedback -->
            <p id="password-match-feedback" style="color: red; display: none;">Passwords do not match.</p><br>

            <!-- Show Password Checkbox -->
            <input type="checkbox" id="showPassword"> Show Password<br>

            <!-- Register Button -->
            <button type="submit">Register</button>
        </form>
        <p>Note: Proceed to the Library Front desk to claim the Library Card.</p>
    </div>

    <script>
        const registerForm = document.getElementById('registerForm');
        const roleSelect = document.getElementById('role');
        const studentFields = document.getElementById('studentFields');
        const teacherFields = document.getElementById('teacherFields');
        const yearLevel = document.getElementById('year_level');
        const course = document.getElementById('course');
        const department = document.getElementById('department');
        const password = document.getElementById('password');
        const passwordConfirm = document.getElementById('password_confirm');
        const passwordMatchFeedback = document.getElementById('password-match-feedback');

        roleSelect.addEventListener('change', function () {
            if (this.value === 'Student') {
                studentFields.style.display = 'block';
                teacherFields.style.display = 'none';
                yearLevel.setAttribute('required', 'true');
                course.setAttribute('required', 'true');
                department.removeAttribute('required');
            } else if (this.value === 'Teacher') {
                studentFields.style.display = 'none';
                teacherFields.style.display = 'block';
                department.setAttribute('required', 'true');
                yearLevel.removeAttribute('required');
                course.removeAttribute('required');
            } else {
                studentFields.style.display = 'none';
                teacherFields.style.display = 'none';
                yearLevel.removeAttribute('required');
                course.removeAttribute('required');
                department.removeAttribute('required');
            }
        });

        // Password visibility toggle
        document.getElementById('showPassword').addEventListener('change', function () {
            if (this.checked) {
                password.type = 'text';
                passwordConfirm.type = 'text';
            } else {
                password.type = 'password';
                passwordConfirm.type = 'password';
            }
        });

        // Check if passwords match
        function checkPasswordMatch() {
            if (password.value !== passwordConfirm.value) {
                passwordMatchFeedback.style.display = 'block';
            } else {
                passwordMatchFeedback.style.display = 'none';
            }
        }

        // Check password strength
        function checkPasswordStrength() {
            const strengthMeter = document.getElementById('password-strength-meter');
            const passwordValue = password.value;

            if (passwordValue.length === 0) {
                strengthMeter.style.width = '0%';
                strengthMeter.style.backgroundColor = 'red';
                return;
            }

            let strength = 0;

            // Strength indicators (example: length, numbers, special chars)
            if (passwordValue.length > 7) strength += 25;
            if (/[A-Z]/.test(passwordValue)) strength += 25;
            if (/[0-9]/.test(passwordValue)) strength += 25;
            if (/[^A-Za-z0-9]/.test(passwordValue)) strength += 25;

            strengthMeter.style.width = strength + '%';

            if (strength < 50) {
                strengthMeter.style.backgroundColor = 'red';
            } else if (strength < 75) {
                strengthMeter.style.backgroundColor = 'yellow';
            } else {
                strengthMeter.style.backgroundColor = 'green';
            }
        }
    </script>
</body>
</html>
